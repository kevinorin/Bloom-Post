tinymce.PluginManager.add("advlist", function(a, url) {
    function b(a, b) {
        var c = [];
        return tinymce.each(b.split(/[ ,]/), function(a) {
            c.push({
                text: a.replace(/\-/g, " ").replace(/\b\w/g, function(a) {
                    return a.toUpperCase()
                }),
                data: "default" == a ? "" : a
            })
        }), c
    }

    function c(b, c) {
        a.undoManager.transact(function() {
            var d, e = a.dom,
                f = a.selection;
            d = e.getParent(f.getNode(), "ol,ul"), d && d.nodeName == b && c !== !1 || a.execCommand("UL" == b ? "InsertUnorderedList" : "InsertOrderedList"), c = c === !1 ? g[b] : c, g[b] = c, d = e.getParent(f.getNode(), "ol,ul"), d && (e.setStyle(d, "listStyleType", c ? c : null), d.removeAttribute("data-mce-style")), a.focus()
        })
    }

    function d(b) {
        var c = a.dom.getStyle(a.dom.getParent(a.selection.getNode(), "ol,ul"), "listStyleType") || "";
        b.control.items().each(function(a) {
            a.active(a.settings.data === c)
        })
    }
    var e, f, g = {};
    e = b("OL", a.getParam("advlist_number_styles",  a.getLang('wpep_langs.advlist_default') + ',' + a.getLang('wpep_langs.advlist_lalpha') + ',' + a.getLang('wpep_langs.advlist_lgreek') + ',' + a.getLang('wpep_langs.advlist_lroman') + ',' + a.getLang('wpep_langs.advlist_ualpha') + ',' + a.getLang('wpep_langs.advlist_uroman'))), f = b("UL", a.getParam("advlist_bullet_styles", a.getLang('wpep_langs.advlist_default') + ',' + a.getLang('wpep_langs.advlist_circle') + ',' + a.getLang('wpep_langs.advlist_disc') + ',' + a.getLang('wpep_langs.advlist_square'))), a.addButton("adv_numlist", {
        type: "splitbutton",
        tooltip: a.getLang('wpep_langs.advlist_nlist'),
		image: url + '/adv_numlist.png',
        menu: e,
        onshow: d,
        onselect: function(a) {
            c("OL", a.control.settings.data)
        },
        onclick: function() {
            c("OL", !1)
        }
    }), a.addButton("adv_bullist", {
        type: "splitbutton",
        tooltip: a.getLang('wpep_langs.advlist_blist'),
		image: url + '/adv_bullist.png',
        menu: f,
        onshow: d,
        onselect: function(a) {
            c("UL", a.control.settings.data)
        },
        onclick: function() {
            c("UL", !1)
        }
    })
});
